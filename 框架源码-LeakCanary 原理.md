

传统定义的内存泄露：申请的内存忘记释放了。
Android （或 JVM）的内存泄露：短⽣命周期的对象被⻓⽣命周期的对象持有，从⽽导致短⽣命周 期的对象不能被释放。

内存泄漏是指在程序中分配的内存未能被正确释放的情况。在Android开发中，内存泄漏通常发生在对象被分配了内存后，但在其不再被使用时未被妥善释放。这可能导致应用程序占用过多内存，最终影响性能和稳定性。
内存泄漏的常见原因包括：保持引用、上下文引用、非静态内部类、未关闭资源
解决内存泄漏的方法包括：注意对象引用的生命周期、使用弱引用、正确处理上下文引用、避免非静态内部类



LeakCanary 是一个用于检测Android应用中内存泄漏的开源库。它的原理是通过监视应用程序的堆内存，检测对象的引用关系，从而发现潜在的内存泄漏问题。

1. 对象引用追踪： LeakCanary会监视应用程序的堆内存，定期检查对象的引用关系。它会查找无法被释放的对象引用。
2. 弱引用和弱引用队列： LeakCanary 使用弱引用和弱引用队列（WeakReference和WeakReferenceQueue）来监视对象的生命周期。如果一个对象只被弱引用持有，并且没有强引用指向它，那么它会被认为是可以被垃圾回收的。
3. Heap Dump： 当 LeakCanary 检测到潜在的内存泄漏时，它会触发应用程序生成堆转储（heap dump）。堆转储是应用程序内存状态的快照，可以在后续进行分析。
4. 分析工具： LeakCanary 使用分析工具来分析堆转储，识别泄漏的对象和引用链。这些分析工具能够帮助确定哪个对象是泄漏的、泄漏的原因是什么以及在哪个部分的代码中发生的。
5. 通知开发者： 一旦 LeakCanary 检测到潜在的内存泄漏，它会向开发者发出通知，通常是通过通知栏、日志输出或者其他途径。通知包含了泄漏对象的详细信息，帮助开发者迅速定位和修复问题。